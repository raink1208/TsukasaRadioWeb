import{v as e,_ as t,t as n}from"./server.mjs";import{s as r,i as o}from"../routes/renderer.mjs";import{aD as s}from"../nitro/nitro.mjs";const i=e.defineComponent({__name:"InnerWrapper",__ssrInlineRender:!0,props:{maxSize:{}},setup:t=>(t,n,s,i)=>{n(`<div${r(e.mergeProps({class:"inner-wrapper",style:{"max-width":t.maxSize+"px"}},i))} data-v-65860a0e>`),o(t.$slots,"default",{},null,n,s),n("</div>")}}),a=i.setup;i.setup=(t,n)=>{const r=e.useSSRContext();return(r.modules||(r.modules=new Set)).add("components/InnerWrapper.vue"),a?a(t,n):void 0};const c=t(i,[["__scopeId","data-v-65860a0e"]]),u={content:"v3.3.0--ltaOM2ilbkkZtYtg6OgB4pCnRdDaqzmKLBwdsNduqww",news:"v3.3.0--ncp03SRbPtJix2X36kf55VsFYls_bZksZ03z4BixpyU",archive:"v3.3.0--HR7EnSA6m1rbYl7dx_4lJrcze9L6BK3JSj0XwQHbf7s"},l={content:"_content_content",news:"_content_news",archive:"_content_archive",info:"_content_info"},buildGroup=(e,t)=>{const n=e._conditions;return n.length>0?`(${n.join(` ${t} `)})`:""},collectionQueryGroup=e=>{const t=[],n={_conditions:t,where(e,r,o){let s;switch(r.toUpperCase()){case"IN":case"NOT IN":if(!Array.isArray(o))throw new TypeError(`Value for ${r} must be an array`);{const t=o.map((e=>singleQuote(e))).join(", ");s=`"${String(e)}" ${r.toUpperCase()} (${t})`}break;case"BETWEEN":case"NOT BETWEEN":if(!Array.isArray(o)||2!==o.length)throw new Error(`Value for ${r} must be an array with two elements`);s=`"${String(e)}" ${r.toUpperCase()} ${singleQuote(o[0])} AND ${singleQuote(o[1])}`;break;case"IS NULL":case"IS NOT NULL":s=`"${String(e)}" ${r.toUpperCase()}`;break;case"LIKE":case"NOT LIKE":s=`"${String(e)}" ${r.toUpperCase()} ${singleQuote(o)}`;break;default:s=`"${String(e)}" ${r} ${singleQuote("boolean"==typeof o?Number(o):o)}`}return t.push(`${s}`),n},andWhere(e){const r=e(collectionQueryGroup());return t.push(buildGroup(r,"AND")),n},orWhere(e){const r=e(collectionQueryGroup());return t.push(buildGroup(r,"OR")),n}};return n};function singleQuote(e){return`'${String(e).replace(/'/g,"''")}'`}const queryCollection=e=>{var t,r;const o=null==(r=null==(t=n())?void 0:t.ssrContext)?void 0:r.event;return((e,t)=>{const n={conditions:[],selectedFields:[],offset:0,limit:0,orderBy:[],count:{field:"",distinct:!1}},r={__params:n,andWhere(e){const t=e(collectionQueryGroup());return n.conditions.push(buildGroup(t,"AND")),r},orWhere(e){const t=e(collectionQueryGroup());return n.conditions.push(buildGroup(t,"OR")),r},path:e=>r.where("path","=",s(e)),skip:e=>(n.offset=e,r),where:(e,t,n)=>(r.andWhere((r=>r.where(String(e),t,n))),r),limit:e=>(n.limit=e,r),select:(...e)=>(e.length&&n.selectedFields.push(...e),r),order:(e,t)=>(n.orderBy.push(`"${String(e)}" ${t}`),r),all:async()=>t(e,buildQuery()).then((e=>e||[])),first:async()=>t(e,buildQuery({limit:1})).then((e=>e[0]||null)),count:async(n="*",r=!1)=>t(e,buildQuery({count:{field:String(n),distinct:r}})).then((e=>e[0].count))};function buildQuery(t={}){let r="SELECT ";if(null==t?void 0:t.count)r+=`COUNT(${t.count.distinct?"DISTINCT ":""}${t.count.field}) as count`;else{const e=Array.from(new Set(n.selectedFields));r+=e.length>0?e.map((e=>`"${String(e)}"`)).join(", "):"*"}r+=` FROM ${l[String(e)]}`,n.conditions.length>0&&(r+=` WHERE ${n.conditions.join(" AND ")}`),n.orderBy.length>0?r+=` ORDER BY ${n.orderBy.join(", ")}`:r+=" ORDER BY stem ASC";const o=(null==t?void 0:t.limit)||n.limit;return o>0&&(n.offset>0?r+=` LIMIT ${o} OFFSET ${n.offset}`:r+=` LIMIT ${o}`),r}return r})(e,((e,t)=>async function(e,t,n){return async function(e,t,n){return await $fetch(`/__nuxt_content/${t}/query`,{context:e?{cloudflare:e.context.cloudflare}:{},headers:{"content-type":"application/json"},query:{v:u[String(t)],t:void 0},method:"POST",body:{sql:n}})}(e,String(t),n)}(o,e,t)))};export{c as _,queryCollection as q};
//# sourceMappingURL=app.mjs.map

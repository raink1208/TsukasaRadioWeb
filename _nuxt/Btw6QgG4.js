import{e as v,K as I,L as x,c as l,o as c,a,J as g,F as C,h as L,t as m,_ as f,b as u,i as w,k as A,y,r as V,q as T,w as D,l as h,M as B}from"./cmsiKXx1.js";import{_ as M}from"./CyaBLkao.js";import{_ as q,u as F,q as S}from"./BBumxMKP.js";import{a as W}from"./DgwjMcAd.js";import"./D0YZH9Hg.js";const z={class:"tag-filter"},E=["onClick"],N=v({__name:"TagFilter",props:I({tags:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(d){const t=x(d,"modelValue");return(s,n)=>(c(),l("div",z,[a("button",{class:g({active:t.value===null}),onClick:n[0]||(n[0]=e=>t.value=null)}," 全て表示 ",2),(c(!0),l(C,null,L(s.tags,(e,r)=>(c(),l("button",{key:r,class:g({active:t.value===r}),onClick:p=>t.value=r},m(r)+" ("+m(e)+") ",11,E))),128))]))}}),R=f(N,[["__scopeId","data-v-af231708"]]),U={class:"card"},j={class:"content"},J=["href"],K=["src"],Y={class:"body"},G={class:"title"},H={class:"description"},O={class:"detail-button"},P=v({__name:"CardListItem",props:{archive:{}},setup(d){const t=e=>`http://img.youtube.com/vi/${e}/hqdefault.jpg`,s=e=>`https://www.youtube.com/live/${e}`,n=e=>`/archive/${e}`;return(e,r)=>{const p=w,i=M;return c(),l("div",U,[a("div",j,[a("a",{href:s(e.archive.videoId)},[a("figure",null,[a("img",{src:t(e.archive.videoId),alt:"サムネイル"},null,8,K),u(p,{name:"icon-park-outline:play",class:"play-icon"})])],8,J),a("div",Y,[a("p",G,m(e.archive.title),1),a("p",H,m(e.archive.description),1),a("div",O,[u(i,{to:n(e.archive.archiveId),text:"詳細を見る"},null,8,["to"])])])])])}}}),Q=f(P,[["__scopeId","data-v-44e7c091"]]),X={class:"archive-table"},Z=v({__name:"CardList",props:{archiveList:{}},setup(d){return(t,s)=>{const n=Q;return c(),l("div",X,[(c(!0),l(C,null,L(t.archiveList,e=>(c(),l("div",{class:"archive-card",key:e.archiveId},[u(n,{archive:e},null,8,["archive"])]))),128)),s[0]||(s[0]=a("div",{class:"empty archive-card"},null,-1)),s[1]||(s[1]=a("div",{class:"empty archive-card"},null,-1))])}}}),ee=f(Z,[["__scopeId","data-v-fa4da621"]]),re=v({__name:"index",async setup(d){let t,s;const{data:n}=([t,s]=A(()=>F("archive",()=>S("archive").where("draft","=",!0).order("archiveId","DESC").all())),t=await t,s(),t),e=y(()=>{var i;return(i=n.value)==null?void 0:i.map(o=>o.tags).flat().reduce((o,_)=>(o[_]=(o[_]||0)+1,o),{})}),r=V(null),p=y(()=>{var o;const i=r.value;return i?((o=n.value)==null?void 0:o.filter(_=>_.tags.includes(i)))??null:n.value});return W({title:"Archive | 領国つかさの深夜通信-Dark Web-",description:"",ogTitle:"Archive | 領国つかさの深夜通信-Dark Web-",ogDescription:""}),(i,o)=>{const _=R,$=ee,k=q;return c(),T(k,{"max-size":1480},{default:D(()=>[u(_,{modelValue:h(r),"onUpdate:modelValue":o[0]||(o[0]=b=>B(r)?r.value=b:null),tags:h(e)},null,8,["modelValue","tags"]),u($,{archiveList:h(p)},null,8,["archiveList"])]),_:1})}}});export{re as default};
